profiles {

    standard {

        docker {

            enabled             = true

            envWhitelist        = "SLURM_CPUS_ON_NODE"

            runOptions          = '-v "$TMPDIR":"$TMPDIR"' // For compatibility with the parallel command called by Tb-Profiler

        }

    }

    docker {

        docker {

            enabled             = true

            envWhitelist        = "SLURM_CPUS_ON_NODE"

            runOptions          = '-v "$TMPDIR":"$TMPDIR"' // For compatibility with the parallel command called by Tb-Profiler

        }
    
    }

    podman {

        podman {

            enabled             = true

            envWhitelist        = "SLURM_CPUS_ON_NODE"

            runOptions          = '-v "$TMPDIR":"$TMPDIR"' // For compatibility with the parallel command called by Tb-Profiler

        }
    
    }

    singularity {

        singularity {

            enabled             = true

            envWhitelist        = "SLURM_CPUS_ON_NODE"

            runOptions          = '-B "$TMPDIR"' // For compatibility with the parallel command called by Tb-Profiler

            autoMounts          = true

        }
    
    }

}

process {

    container                   = "ksw9/mtb-call"

    withLabel: slurm {

    	executor		        = "slurm"

    	clusterOptions		    = "-A ucgd-rw --partition ucgd-rw -N 1"
        
        errorStrategy           = "finish"

    }

}

params {
    
    // Main files/directories
    // N.B. All paths are relative to resources_dir

    resources_dir               = "/uufs/chpc.utah.edu/common/HIPAA/u1084359/work_dir/genome_resources/kwalter_pipeline"

    reads_list                  = "input/reads_list.tsv"

    kraken_database_path        = "kraken_db/standard_plus_eupath46"

    reference_fasta_path        = "refs/NA.fasta"

    reference_fasta_index_path  = "refs/NA.fasta.fai"

    bwa_index_path              = "bwa_index"

    bowtie_index_path           = "bowtie2_index"

    bowtie_index_prefix         = "NA"

    gatk_dictionary_path        = "gatk_dictionary/NA.dict"

    bed_path                    = "bed/NA_ppe.bed.gz"

    bed_index_path              = "bed/NA_ppe.bed.gz.tbi"

    vcf_header                  = "bed/NA_hdr.txt"

    snpeff                      = "snpEff/snpEff.jar"

    snpeff_db                   = "NA"

    snpeff_datapath             = "snpEff/data"

    snpeff_config		        = "snpEff/snpEff.config"

    // Main variables

    minimizers_log_ratio_thr    = 1.5

    mapper                      = "bwa"

    run_lofreq                  = false

    seq_platform                = "illumina"

    library                     = "library1"

    depth_threshold             = 5

    qual_threshold              = 20

    ploidy                      = 1

    nextseq                     = false

    nextseq_qual_threshold      = 20
    
    variants_only               = true

}
